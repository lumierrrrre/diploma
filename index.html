<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta
            name="viewport"
            content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
        />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <link rel="stylesheet" href="./styles/styles.css" />
        <title>Diploma</title>
    </head>
    <body>
        <header class="header">
            <div class="header__inner container">
                <div class="header__top">
                    <a class="header__logo logo" href="/">
                        <img
                            class="logo__image"
                            src="./images/logo.svg"
                            alt="Logo"
                            width="75"
                            height="75"
                            loading="lazy"
                        />
                    </a>
                    <h1 class="header__logo-text">
                        Система ассистированного преобразования сигналов
                    </h1>
                </div>
                <nav class="header__menu">
                    <ul class="header__menu-list">
                        <li class="header__menu-item">
                            <a class="header__menu-link" href="/">Инструкция</a>
                        </li>
                        <li class="header__menu-item">
                            <a class="header__menu-link" href="/">Демо-режим</a>
                        </li>
                        <li class="header__menu-item">
                            <a class="header__menu-link" href="/">Авторы</a>
                        </li>
                    </ul>
                </nav>
            </div>
        </header>
        <main class="content">
            <section class="section step step--active container" id="step1">
                <div class="section__body">
                    <div class="data">
                        <h2 class="data__title">Загрузка данных</h2>
                        <p class="data__description">
                            Загрузите данные (поддерживаемые форматы:
                            <strong>.csv, .jpg, .png</strong>)
                        </p>
                        <label class="data__button button" for="fileInput">
                            Выбрать файл
                        </label>
                        <input
                            type="file"
                            id="fileInput"
                            accept=".csv, .jpg, .png"
                            style="display: none"
                        />
                        <p class="data__button-description">
                            или перетащите файл сюда
                        </p>
                    </div>
                    <div id="chartContainer" class="data__chart hidden"></div>
                </div>
            </section>
            <!-- Шаг 2: Загрузка скрипта обработки -->
            <section id="step2" class="section step container">
                <div class="section__body step__body">
                    <div class="data">
                        <h2 class="data__title">
                            Загрузка скрипта обработки данных
                        </h2>
                        <p class="data__description">
                            Загрузите программу (поддерживаемый формат:
                            <strong>.py</strong>)
                        </p>
                        <label class="data__button button" for="scriptInput">
                            Выбрать файл
                        </label>
                        <input
                            type="file"
                            id="scriptInput"
                            accept=".py"
                            style="display: none"
                        />
                        <p class="data__button-description">
                            или перетащите файл сюда
                        </p>
                    </div>

                    <!-- Кнопка "Предыдущий шаг" -->
                    <div class="step__navigation">
                        <button class="button" id="backToStep1">
                            Предыдущий шаг
                        </button>
                    </div>
                </div>
            </section>
            <!-- Шаг 3: Выбор функции и параметров -->
            <section id="step3" class="section step container">
                <div class="section__body step__body">
                    <div class="data">
                        <h2 class="data__title">Выбор функции и параметров</h2>
                        <p class="data__description">
                            Выберите функцию, а также задайте начальные и
                            конечные значения входным параметрам
                        </p>
                        <div class="function-container">
                            <form id="functionForm" class="data__form">
                                <!-- Функции появятся здесь -->
                            </form>

                            <div class="step__navigation">
                                <button class="button" id="backToStep2">
                                    Предыдущий шаг
                                </button>
                                <button
                                    class="button"
                                    id="toStep4"
                                    style="margin-left: auto"
                                >
                                    Следующий шаг
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <section id="step4" class="section step container">
                <div class="section__body step__body">
                    <div class="data">
                        <h2 class="data__title">Результат</h2>
                        <div class="data__description">
                            <div
                                id="orderControl"
                                style="margin-bottom: 1rem"
                            ></div>
                            <div id="chartArea" class="data__chart"></div>
                        </div>
                    </div>
                    <div class="step__navigation">
                        <button class="button" id="backToStep3">
                            Предыдущий шаг
                        </button>
                    </div>
                </div>
            </section>

            <aside class="sidebar" id="sidebar">
                <h3 class="sidebar__title">Файл загружен!</h3>
                <p class="sidebar__filename" id="fileNameDisplay"></p>
                <div class="sidebar__actions">
                    <button
                        class="sidebar__actions--plot button"
                        id="plotButton"
                    >
                        Показать график
                    </button>
                    <button class="sidebar__actions--next button" type="button">
                        Следующий шаг
                    </button>
                </div>
            </aside>
        </main>

        <footer class="footer">
            <div class="footer__inner container">© 2025</div>
        </footer>

        <!-- Скрипты -->
        <script defer src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script defer src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.0.1/dist/chartjs-plugin-zoom.min.js"></script>
        <script defer src="./chart.js"></script>
        <script defer src="https://cdn.jsdelivr.net/pyodide/v0.23.4/full/pyodide.js"></script>
        <script type="module" src="./scripts/main.js"></script>
    </body>
</html>
